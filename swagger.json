{
    "openapi" : "3.0.0",
    "info" : {
        "title" : "E-Commerce BingleShop Docs",
        "version" : "1.0"
    },

    "servers" : [
        {
            "url": "http://localhost:3000",
            "description": "Development server"
        }
    ],

    "tags" : [
        {
            "name" : "user",
            "description" : "All routes about user endpoints"
        },
        {
            "name" : "product",
            "description" : "All routes about product endpoints"
        }
    ],

    "paths" : {
        "/api/user" : {
            "get" : {
                "tags" : ["user"],
                "summary" : "find all user",
                "description" : "returns all user data details",
                "responses" : {
                    "200" : {
                        "description" : "Success",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "$ref" : "#/components/schemas/UserGet"
                                }
                            }
                        }
                    },
                    "400" : {
                        "description" : "There is no user yet"
                    },
                    "500" : {
                        "description" : "Internal server error"
                    }
                }
            },
            "patch" : {
                "tags" : ["user"],
                "summary" : "update user details by id",
                "description" : "require a header token",
                "parameters" : [
                    {
                        "in" : "body",
                        "name" : "body",
                        "description" : "fields that need to be filled in",
                        "required" : true,
                        "schema" : {
                            "$ref" : "#/components/schemas/UserUpdateFields"
                        }
                    }
                ],
                "responses" : {
                    "200" : {
                        "description" : "Success",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "$ref" : "#/components/schemas/UserUpdate"
                                }
                            }
                        }
                    },
                    "400" : {
                        "description" : "There is no user with ID {id} Unauthorized to make changes"
                    },
                    "401" : {
                        "description" : "Unauthorized to make changes"
                    }
                }
            },
            "delete" : {
                "tags" : ["user"],
                "summary" : "delete user details by id",
                "description" : "require a header token",
                "responses" : {
                    "200" : {
                        "description" : "User has been deleted"
                    },
                    "400" : {
                        "description" : "There is no user with ID {id}"
                    },
                    "401" : {
                        "description" : "Unauthorized to make changes"
                    }
                }
            }
        },
        "/api/user/verify" : {
            "get" : {
                "tags" : ["user"],
                "summary" : "verify user",
                "description" : "verify user with the link sent to the email",
                "responses" : {
                    "200" : {
                        "description" : "User verified and confirmed"
                    },
                    "500" : {
                        "description" : "Invalid Token"
                    }
                }
            }
        },
        "/api/register" : {
            "post" : {
                "tags" : ["user"],
                "summary" : "create new user",
                "description" : "",
                "parameters" : [
                    {
                        "in" : "body",
                        "name" : "body",
                        "description" : "fields that need to be filled in",
                        "required" : true,
                        "schema" : {
                            "$ref" : "#/components/schemas/UserRegisterFields"
                        }
                    }
                ],
                "responses" : {
                    "200" : {
                        "description" : "Success",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "$ref" : "#/components/schemas/UserRegister"
                                }
                            }
                        }
                    },
                    "400" : {
                        "description" : "Invalid input / Email is already registered"
                    }
                }
            }
        },
        "/api/login" : {
            "post" : {
                "tags" : ["user"],
                "summary" : "logs user into the system",
                "description" : "",
                "parameters" : [
                    {
                        "in" : "body",
                        "name" : "body",
                        "description" : "fields that need to be filled in",
                        "required" : true,
                        "schema" : {
                            "$ref" : "#/components/schemas/UserLoginFields"
                        }
                    }
                ],
                "responses" : {
                    "200" : {
                        "description" : "Success",
                        "content" : {
                            "application/json" : {
                                "type" : "object",
                                "example" : {
                                    "data" : "token"
                                }
                            }
                        }
                    },
                    "400" : {
                        "description" : "Email is not registered yet / Password invalid"
                    }
                }
            }
        },
        "/api/avatar" : {
            "post" : {
                "tags" : ["user"],
                "summary" : "insert photo to specified user",
                "description" : "require a header token",
                "parameters" : [
                    {
                        "in" : "formData",
                        "name" : "avatar",
                        "description" : "upload image file with format .jpg or .png",
                        "required" : true,
                        "schema" : {
                            "type" : "file",
                            "format" : "binary"
                        }
                    }
                ],
                "responses" : {
                    "200" : {
                        "description" : "Success",
                        "content" : {
                            "application/json" : {
                                "type" : "object",
                                "example" : {
                                    "data" : "Success update avatar"
                                }
                            }
                        }
                    },
                    "400" : {
                        "description" : "Invalid token / Unauthenticated / Please verify your email first"
                    },
                    "401" : {
                        "description" : "Unauthorized to make changes"
                    }
                }
            }
        },


        "/api/product" : {
            "get" : {
                "tags" : ["product"],
                "summary" : "find all product",
                "description" : "returns all product data details",
                "responses" : {
                    "200" : {
                        "description" : "Success",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "$ref" : "#/components/schemas/ProductGet"
                                }
                            }
                        }
                    },
                    "400" : {
                        "description" : "There is no product yet"
                    },
                    "500" : {
                        "description" : "Internal server error"
                    }
                }
            },
            "post" : {
                "tags" : ["product"],
                "summary" : "create new product",
                "description" : "require a header token and only can be done with admin role",
                "parameters" : [
                    {
                        "in" : "body",
                        "name" : "body",
                        "description" : "fields that need to be filled in",
                        "required" : true,
                        "schema" : {
                            "$ref" : "#/components/schemas/ProductCreateFields"
                        }
                    }
                ],
                "responses" : {
                    "200" : {
                        "description" : "Success",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "$ref" : "#/components/schemas/ProductCreate"
                                }
                            }
                        }
                    },
                    "400" : {
                        "description" : "Invalid input"
                    }
                }
            }
        },
        "/api/product/{id}" : {
            "patch" : {
                "tags" : ["product"],
                "summary" : "update product specified by id",
                "description" : "require a header token and only can be done with admin role",
                "parameters" : [
                    {
                        "in" : "body",
                        "name" : "body",
                        "description" : "fields that need to be filled in",
                        "required" : true,
                        "schema" : {
                            "$ref" : "#/components/schemas/ProductUpdateFields"
                        }
                    }
                ],
                "responses" : {
                    "200" : {
                        "description" : "Success",
                        "content" : {
                            "application/json" : {
                                "schema" : {
                                    "$ref" : "#/components/schemas/ProductUpdate"
                                }
                            }
                        }
                    },
                    "400" : {
                        "description" : "There is no product with ID {id}"
                    },
                    "401" : {
                        "description" : "Invalid token"
                    }
                }
            },
            "delete" : {
                "tags" : ["product"],
                "summary" : "delete specified product by id",
                "description" : "require a header token and only can be done with admin role",
                "responses" : {
                    "200" : {
                        "description" : "Product has been deleted"
                    },
                    "400" : {
                        "description" : "There is no product with ID {id}"
                    },
                    "401" : {
                        "description" : "Invalid token"
                    }
                }
            }
        }
    },

    "components" : {
        "schemas" : {
            "UserGet" : {
                "type" : "object",
                "properties" : {
                    "id" : { "type" : "integer" },
                    "name" : { "type" : "string" },
                    "email" : { "type" : "string" },
                    "password" : { "type" : "string" },
                    "street" : { "type" : "string" },
                    "city" : { "type" : "string" },
                    "avatar" : { "type" : "string", "description" : "expected value is a URL" },
                    "role" : { "type" : "string", "description" : "value must be 'user/admin'" },
                    "confirmed" : { "type" : "boolean" }
                },
                "example" : [
                    {
                        "id" : "1",
                        "name" : "admin",
                        "email" : "admin@gmail.com",
                        "password" : "$23$10$DS4QCrAT7IDrUnrapZjtCemdB8W6VT0fP3EXR9glgNR9jegIazd/.",
                        "street" : "Jl. Mawar",
                        "city" : "Jakarta",
                        "avatar" : "URL",
                        "role" : "admin",
                        "confirmed" : true
                    },
                    {
                        "id" : "2",
                        "name" : "customer",
                        "email" : "customer@gmail.com",
                        "password" : "$23$10$DS4QCrAT7IDrUnrapZjtCemdB8W6VT0fP3EXR9glgNR9jegIazd/.",
                        "street" : "Jl. Mawar",
                        "city" : "Bengkulu",
                        "avatar" : null,
                        "role" : "member",
                        "confirmed" : true
                    }
                ]
            },
            "UserRegisterFields" : {
                "type" : "object",
                "properties" : {
                    "name" : { "type" : "string" },
                    "email" : { "type" : "string" },
                    "password" : { "type" : "string" },
                    "street" : { "type" : "string" },
                    "city" : { "type" : "string" },
                    "avatar" : { "type" : "string", "description" : "expected value is a URL" },
                    "role" : { "type" : "string", "description" : "value must be 'user/admin'" }
                }
            },
            "UserRegister" : {
                "type" : "object",
                "properties" : {
                    "id" : { "type" : "integer" },
                    "name" : { "type" : "string" },
                    "email" : { "type" : "string" },
                    "password" : { "type" : "string" },
                    "street" : { "type" : "string" },
                    "city" : { "type" : "string" },
                    "avatar" : { "type" : "string", "description" : "expected value is a URL" },
                    "role" : { "type" : "string", "description" : "value must be 'user/admin'" },
                    "confirmed" : { "type" : "boolean" }
                },
                "example" : {
                    "id" : "1",
                    "name" : "admin",
                    "email" : "admin@gmail.com",
                    "password" : "$23$10$DS4QCrAT7IDrUnrapZjtCemdB8W6VT0fP3EXR9glgNR9jegIazd/.",
                    "street" : "Jl. Mawar",
                    "city" : "Jakarta",
                    "avatar" : null,
                    "role" : "admin",
                    "confirmed" : false
                }
            },
            "UserLoginFields" : {
                "type" : "object",
                "properties" : {
                    "email" : { "type" : "string" },
                    "password" : { "type" : "string" }
                }
            },
            "UserUpdateFields" : {
                "type" : "object",
                "properties" : {
                    "name" : { "type" : "string" },
                    "email" : { "type" : "string" },
                    "street" : { "type" : "string" },
                    "city" : { "type" : "string" }
                }
            },
            "UserUpdate" : {
                "type" : "object",
                "properties" : {
                    "id" : { "type" : "integer" },
                    "name" : { "type" : "string" },
                    "email" : { "type" : "string" },
                    "password" : { "type" : "string" },
                    "street" : { "type" : "string" },
                    "city" : { "type" : "string" },
                    "avatar" : { "type" : "string", "description" : "expected value is a URL" },
                    "role" : { "type" : "string", "description" : "value must be 'user/admin'" },
                    "confirmed" : { "type" : "boolean" }
                },
                "example" : {
                    "id" : "1",
                    "name" : "admin",
                    "email" : "admin@gmail.com",
                    "password" : "$23$10$DS4QCrAT7IDrUnrapZjtCemdB8W6VT0fP3EXR9glgNR9jegIazd/.",
                    "street" : "Jl. Mawar",
                    "city" : "Jakarta",
                    "avatar" : "URL",
                    "role" : "admin",
                    "confirmed" : false
                }
            },
            "ProductGet" : {
                "type" : "object",
                "properties" : {
                    "id" : { "type" : "integer" },
                    "userID" : { "type" : "integer" },
                    "productName" : { "type" : "string" },
                    "quantity" : { "type" : "integer" },
                    "price" : { "type" : "integer" },
                    "avatar" : { "type" : "string", "description" : "expected value is a URL" }
                },
                "example" : [
                    {
                        "id" : "1",
                        "userID" : "1",
                        "productName" : "Oreo 20gr",
                        "quantity" : 20,
                        "price" : 2000,
                        "avatar" : "URL"
                    },
                    {
                        "id" : "2",
                        "userID" : "1",
                        "productName" : "Pocari Sweat 300ml",
                        "quantity" : 30,
                        "price" : 5000,
                        "avatar" : "URL"
                    }
                ]
            },
            "ProductCreateFields" : {
                "type" : "object",
                "properties" : {
                    "userID" : { "type" : "integer" },
                    "productName" : { "type" : "string" },
                    "quantity" : { "type" : "integer" },
                    "price" : { "type" : "integer" },
                    "avatar" : { "type" : "string", "description" : "expected value is a URL" }
                }
            },
            "ProductCreate" : {
                "type" : "object",
                "properties" : {
                    "userID" : { "type" : "integer" },
                    "productName" : { "type" : "string" },
                    "quantity" : { "type" : "integer" },
                    "price" : { "type" : "integer" },
                    "avatar" : { "type" : "string", "description" : "expected value is a URL" }
                },
                "example" : {
                    "id" : "1",
                    "productName" : "Oreo 20gr",
                    "quantity" : 20,
                    "price" : 2000,
                    "avatar" : "URL"
                }
            },
            "ProductUpdateFields" : {
                "type" : "object",
                "properties" : {
                    "productName" : { "type" : "string" },
                    "quantity" : { "type" : "integer" },
                    "price" : { "type" : "integer" }
                }
            },
            "ProductUpdate" : {
                "type" : "object",
                "properties" : {
                    "id" : { "type" : "integer" },
                    "userID" : { "type" : "integer" },
                    "productName" : { "type" : "string" },
                    "quantity" : { "type" : "integer" },
                    "price" : { "type" : "integer" },
                    "avatar" : { "type" : "string", "description" : "expected value is a URL" }
                },
                "example" : {
                    "id" : "1",
                    "userID" : "1",
                    "productName" : "Oreo 20gr",
                    "quantity" : 20,
                    "price" : 2000,
                    "avatar" : "URL"
                }
            }
        }
    }
}